# Auto-generated by Recipe Engine, do not modify manually.
# Contains jobs that run performance tests.
performance_2020_3_win:
  name: Performance_2020.3_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 2020.3 --path Editor --wait -c editor -c il2cpp
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -nographics -executeMethod GLTFast.Editor.Tests.SetupProject.ApplySetup glTFastSetup:performance -upmNoDefaultPackages -logfile test-results~/enable-performance-tests.log -quit
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -executeMethod GLTFast.Tests.TestGltfGenerator.CreatePerformanceTestFiles -nographics -upmNoDefaultPackages -logfile test-results~/create-gltf-files.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*
performance_2021_3_win:
  name: Performance_2021.3_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 2021.3 --path Editor --wait -c editor -c il2cpp
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -nographics -executeMethod GLTFast.Editor.Tests.SetupProject.ApplySetup glTFastSetup:performance -upmNoDefaultPackages -logfile test-results~/enable-performance-tests.log -quit
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -executeMethod GLTFast.Tests.TestGltfGenerator.CreatePerformanceTestFiles -nographics -upmNoDefaultPackages -logfile test-results~/create-gltf-files.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*
performance_2022_3_win:
  name: Performance_2022.3_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 2022.3 --path Editor --wait -c editor -c il2cpp
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -nographics -executeMethod GLTFast.Editor.Tests.SetupProject.ApplySetup glTFastSetup:performance -upmNoDefaultPackages -logfile test-results~/enable-performance-tests.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*
performance_6000_0_win:
  name: Performance_6000.0_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 6000.0 --path Editor --wait -c editor -c il2cpp
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -nographics -executeMethod GLTFast.Editor.Tests.SetupProject.ApplySetup glTFastSetup:performance -upmNoDefaultPackages -logfile test-results~/enable-performance-tests.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*
performance_6000_1_win:
  name: Performance_6000.1_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 6000.1 --path Editor --wait -c editor -c il2cpp
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -nographics -executeMethod GLTFast.Editor.Tests.SetupProject.ApplySetup glTFastSetup:performance -upmNoDefaultPackages -logfile test-results~/enable-performance-tests.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*
performance_6000_2_win:
  name: Performance_6000.2_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 6000.2 --path Editor --wait -c editor -c il2cpp
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -nographics -executeMethod GLTFast.Editor.Tests.SetupProject.ApplySetup glTFastSetup:performance -upmNoDefaultPackages -logfile test-results~/enable-performance-tests.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*
performance_6000_2_win:
  name: Performance_6000.2_Win
  agent:
    image: package-ci/win11:v4
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: unity-downloader-cli --unity-version 6000.2 --path Editor --wait -c editor -c il2cpp
  - command: unity-config project add dependency com.unity.test-framework.performance@3.0.3 -p Projects/glTFast-Test
  - command: Editor\Unity.exe -projectPath Projects/glTFast-Test -batchmode -executeMethod GLTFast.Tests.TestGltfGenerator.CreatePerformanceTestFiles -nographics -upmNoDefaultPackages -logfile test-results~/create-gltf-files.log -quit
  - command: UnifiedTestRunner.exe --suite=playmode --scripting-backend=il2cpp --platform=StandaloneWindows64 --editor-location=Editor --testproject=Projects/glTFast-Test --artifacts-path=test-results~ --category=Performance --report-performance-data --performance-project-id=com.unity.cloud.gltfast --extra-editor-arg=-upmNoDefaultPackages
  artifacts:
    logs:
      paths:
      - test-results~/**/*

# Runs all performance jobs.
performance_all:
  name: Performance_All
  dependencies:
  - path: .yamato/performance.yml#performance_2020_3_win
  - path: .yamato/performance.yml#performance_2021_3_win
  - path: .yamato/performance.yml#performance_2022_3_win
  - path: .yamato/performance.yml#performance_6000_0_win
  - path: .yamato/performance.yml#performance_6000_1_win
  - path: .yamato/performance.yml#performance_6000_2_win

